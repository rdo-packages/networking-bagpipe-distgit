{
  "comments": [
    {
      "key": {
        "uuid": "9aa7fdbe_d1a0e0f6",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "The user neutron is created by package openstack-neutron-common but package openstack-bagpipe-bgp doesn\u0027t depends on it so it will fail because neutron user doesn\u0027t exist. You need to add that dependency.",
      "range": {
        "startLine": 7,
        "startChar": 5,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_9a73cd4c",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "do you recommend the spec file adds the user or we add a requires to openstack-neutron-common?",
      "parentUuid": "9aa7fdbe_d1a0e0f6",
      "range": {
        "startLine": 7,
        "startChar": 5,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_fafe996a",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 7,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T09:06:56Z",
      "side": 1,
      "message": "You should add a Requires on openstack-neutron-common to get the user, directory /etc/neutron and /var/log/neutron that you may need (as discussed in comment in next line).",
      "parentUuid": "9aa7fdbe_9a73cd4c",
      "range": {
        "startLine": 7,
        "startChar": 5,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_f17c0475",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 8,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "just as suggestion, most openstack services send logs to files under /var/log/\u003cservice\u003e, but with this configuration is sending it only to syslog. Maybe you could add --log-file\u003d/var/log/neutron/bagpipe-bgp.log",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_fa99396f",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 8,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "@thomas - thoughts?",
      "parentUuid": "9aa7fdbe_f17c0475",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_fae8597e",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 8,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T09:54:59Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "9aa7fdbe_fa99396f",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_1182684f",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "When stoping the service it\u0027s failing with error:\n\n oslo_config.cfg.ConfigFilesNotFoundError: Failed to find some config files: /etc/bagpipe-bgp/bgp.conf\n\nMissing --config-file /etc/neutron/bagpipe-bgp/bgp.conf option?",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_1a9fdd53",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "@thomas - this is contingent upon our discussion last week, will wait for the consensus here and then amend accordingly.",
      "parentUuid": "9aa7fdbe_1182684f",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_1aeefd88",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T09:54:59Z",
      "side": 1,
      "message": "I\u0027m surprised, since the command definition actually provides the right location. I need to check that bagpipe-bgp actually behaves as expected when provided with a non default config file location -- there may be a bug there even though we use standard oslo logging constructs.",
      "parentUuid": "9aa7fdbe_1a9fdd53",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_b46345b0",
        "filename": "bagpipe-bgp.service",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-12T12:03:13Z",
      "side": 1,
      "message": "Ah sorry: I was out of my mind, you also need to provide the config file location to bagpipe-bgp-cleanup!\n  \n   ExecStopPost\u003d/usr/bin/bagpipe-bgp-cleanup --config-file /etc/neutron/bagpipe-bgp/bgp.conf",
      "parentUuid": "9aa7fdbe_1aeefd88",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_11ab48d9",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "it should be python2-oslo-rootwrap. Note that we add a provides to python- in all python2- so python2- should only be used for python2-devel.",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 29
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_7ac46940",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "9aa7fdbe_11ab48d9",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 29
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_da1715a2",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T09:23:47Z",
      "side": 1,
      "message": "Sorry, i messed it up in this comment. I meant it should be python-oslo-rootwrap in line 52",
      "parentUuid": "9aa7fdbe_7ac46940",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 29
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_9a1d8dc0",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:27:28Z",
      "side": 1,
      "message": "same for 23 too?",
      "parentUuid": "9aa7fdbe_da1715a2",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 29
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_3adbc1ee",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T09:42:41Z",
      "side": 1,
      "message": "Yes, python-oslo-rootwrap everywhere",
      "parentUuid": "9aa7fdbe_9a1d8dc0",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 29
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_31af6ce5",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 31,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "ditto",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_9ac10d31",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 31,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "9aa7fdbe_31af6ce5",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_51acf0ed",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 52,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "ditto",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_baddf116",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 52,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "9aa7fdbe_51acf0ed",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_71b9f42d",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 53,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "python2",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_dae2b5d4",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 53,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "9aa7fdbe_71b9f42d",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_f1a5e404",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 55,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "Missing:\n\nRequiers:     python-pyroute2",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_3a02e13e",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 69,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T09:54:59Z",
      "side": 1,
      "message": "Sorry for not catching that earlier, \nthis is actually potentially misleading:\n- the fullname for the service for which bagpipe is the reference driver is networking-bgpvpn (does more than base BGP by doing BGP VPN extensions)\n- networking-bagpipe provides more than a driver for this service (also does neutron ml2, and SFC as a WIP)\n\n\"Networking-BaGPipe\" would be better",
      "range": {
        "startLine": 69,
        "startChar": 23,
        "endLine": 69,
        "endChar": 26
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_915f380e",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 73,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "package openstack-networking-bgp should require python-networking-bagpipe:\n\nRequires:  python-networking-bagpipe \u003d %{version}-%{release}",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_91b6583c",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "It should be:\n\nmv %{buildroot}/etc/%{servicename}/bgp.conf.template %{buildroot}%{_sysconfdir}/neutron/%{servicename}/bgp.conf\n\nFile should be bgp.conf, not bgp.conf.template under /etc/neutron/bagpipe-bgp",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_3ad101fc",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 269
      },
      "writtenOn": "2017-07-11T09:02:29Z",
      "side": 1,
      "message": "@thomas as before",
      "parentUuid": "9aa7fdbe_91b6583c",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_5affa534",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T09:54:59Z",
      "side": 1,
      "message": "The file needs to exists so that the service can start.\nHowever:\n- using bgp.conf.template is not needed, the code having proper defaults in place for all options for which it makes sense\n- for the options that can\u0027t have a meaningful default (e.g. local_address) we can\u0027t do anything, and have to accept that the service won\u0027t start without these being tuned to a meaningful value -- using bgp.conf.template won\u0027t change that\n\nSo, doing a touch %{buildroot}%{_sysconfdir}/neutron/%{servicename}/bgp.conf would work as well.",
      "parentUuid": "9aa7fdbe_3ad101fc",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_9a902dee",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T10:25:15Z",
      "side": 1,
      "message": "Although file content needs to be adjusted as you mentioned, common practice in RDO is to provide a config file with defaults coming from .template or oslo-config-generator for projects that support it. This is useful for users to know what options exist and what to modify.\n\nProviding empty config files have been discussed in the past but in that case we should at least provide the template as documentation file in the package.\n\nI\u0027d be inclined to provide the bgp.conf.template as /etc/neutron/networking-bgp/bgp.conf for consistency with the rest of packages.",
      "parentUuid": "9aa7fdbe_5affa534",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_da68f5f7",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T10:35:01Z",
      "side": 1,
      "message": "Ok, makes sense then.\n\nWhen networking-bagpipe supports oslo-config-generator, using that we\u0027ll be even better.\n\nThe thing is that, currently since bgp.conf.template is provided as an example rather than a reference, it includes things that may vary from the cod-builtin defaults.  And that does vary in some case. In particular I have in mind :\n\n  root_helper_daemon \u003d sudo /usr/local/bin/oslo-rootwrap-daemon /etc/bagpipe-bgp/rootwrap.conf\n\n\nThat vary from the default (empty) and that will fail here in particular because the rootwrap conf files are moved in a different location.\n\nSo if using bgp.conf.template as a base for bgp.conf, then this parameter should be changed to point to the right location for rootwrap.conf .",
      "parentUuid": "9aa7fdbe_9a902dee",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_fa3bf9e8",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T10:37:50Z",
      "side": 1,
      "message": "Could that be changed in the template upstream?",
      "parentUuid": "9aa7fdbe_da68f5f7",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_e5d51e44",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 361
      },
      "writtenOn": "2017-07-11T12:19:18Z",
      "side": 1,
      "message": "At this point, moving /etc/bagpipe-bgp to /etc/neutron/bagpipe-bgp has been an RDO-only decision. Enforcing this move upstream may have side-effects on other deployments and/or packaging. I\u0027d prefer to keep a more conservative approach, unless there are compelling arguments to do otherwise.",
      "parentUuid": "9aa7fdbe_fa3bf9e8",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_25d00650",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-11T12:54:34Z",
      "side": 1,
      "message": "Ok, you can fix root_helper_daemon in bgp.conf template file with a sed command in preparation phase",
      "parentUuid": "9aa7fdbe_e5d51e44",
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9aa7fdbe_b1827c50",
        "filename": "python-networking-bagpipe.spec",
        "patchSetId": 9
      },
      "lineNbr": 125,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-07-07T17:11:02Z",
      "side": 1,
      "message": "it should be 0750",
      "range": {
        "startLine": 125,
        "startChar": 12,
        "endLine": 125,
        "endChar": 16
      },
      "revId": "2d70ef97669ee6ae6064eebb643cac4181c23df8",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}